"use strict";(self.webpackChunkbutterflix=self.webpackChunkbutterflix||[]).push([[63],{3997:function(n,e,r){r.r(e),r.d(e,{default:function(){return V}});var t,a=r(168),i=r(885),s=r(2791),c=r(4569),o=r.n(c),d=r(6031),l=r(4165),u=r(2982),m=r(5861),f=r(9126),h=r(4373),g=r(2975),p=r.n(g),x=r(184);function v(n){var e=n.handleSendMsg,r=(0,s.useState)(""),t=(0,i.Z)(r,2),a=t[0],c=t[1],o=(0,s.useState)(!1),d=(0,i.Z)(o,2),l=d[0],u=d[1];return(0,x.jsxs)(b,{children:[(0,x.jsx)("div",{className:"button-container",children:(0,x.jsxs)("div",{className:"emoji",children:[(0,x.jsx)(f.IZ1,{onClick:function(){u(!l)}}),l&&(0,x.jsx)(p(),{onEmojiClick:function(n,e){var r=a;r+=e.emoji,c(r)}})]})}),(0,x.jsxs)("form",{className:"input-container",onSubmit:function(n){return function(n){n.preventDefault(),a.length>0&&(e(a),c(""))}(n)},children:[(0,x.jsx)("input",{type:"text",placeholder:"type your message here",onChange:function(n){return c(n.target.value)},value:a}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)(h.ghy,{})})]})]})}var j,b=d.ZP.div(t||(t=(0,a.Z)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n      .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n        .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n        .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background-color: transparent;\n          border-color: #9a86f3;\n        }\n        .emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n  .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n  }\n"]))),w=r(2810),k=r(6866);function y(n){var e=n.currentChat,r=n.socket,t=(0,s.useRef)(),a=(0,s.useState)({}),c=(0,i.Z)(a,2),d=c[0],f=c[1];(0,s.useEffect)((function(){o().get("/api/users/me").then((function(n){return f(n.data)}))}),[]);var h=(0,s.useState)([]),g=(0,i.Z)(h,2),p=g[0],j=g[1];(0,s.useEffect)((function(){e&&o().post("/api/messages/getMessage",{from:d.id,to:e.id}).then((function(n){return j(n.data)}))}),[e]);var b=function(){var n=(0,m.Z)((0,l.Z)().mark((function n(t){var a;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o().post("/api/messages/addMessage",{from:d.id,to:e.id,message:t});case 2:r.current.emit("send-msg",{to:e.id,from:d.id,message:t}),(a=(0,u.Z)(p)).push({fromSelf:!0,message:t}),j(a);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=(0,s.useState)(null),Z=(0,i.Z)(y,2),S=Z[0],E=Z[1];return(0,s.useEffect)((function(){r.current&&r.current.on("msg-recieve",(function(n){E({fromSelf:!1,message:n})}))}),[]),(0,s.useEffect)((function(){S&&j((function(n){return[].concat((0,u.Z)(n),[S])}))}),[S]),(0,s.useEffect)((function(){var n;null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[p]),(0,x.jsxs)(N,{children:[(0,x.jsx)("div",{className:"chat-header",children:(0,x.jsxs)("div",{className:"user-details",children:[(0,x.jsx)("div",{className:"avatar",children:(0,x.jsx)(k.qE,{src:e.pic,alt:""})}),(0,x.jsx)("div",{className:"username",children:(0,x.jsx)("h3",{children:e.name})})]})}),(0,x.jsx)("div",{className:"chat-messages",children:p.map((function(n){return(0,x.jsx)("div",{ref:t,children:(0,x.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"recieved"),children:(0,x.jsx)("div",{className:"content ",children:(0,x.jsx)("p",{children:n.message})})})},(0,w.Z)())}))}),(0,x.jsx)(v,{handleSendMsg:b})]})}var Z,N=d.ZP.div(j||(j=(0,a.Z)(["\n  display: grid;\n  grid-template-rows: 10% 80% 10%;\n  gap: 0.1rem;\n  overflow: hidden;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n  .chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n  }\n  .chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 40%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: #d1d1d1;\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n          max-width: 70%;\n        }\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n      }\n    }\n    .recieved {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n      }\n    }\n  }\n"]))),S=r(8762);function E(n){var e=n.contacts,r=n.changeChat,t=(0,s.useState)(void 0),a=(0,i.Z)(t,2),c=a[0],d=a[1],l=(0,s.useState)({}),u=(0,i.Z)(l,2),m=u[0],f=u[1];(0,s.useEffect)((function(){o().get("/api/users/me").then((function(n){return f(n.data)}))}),[]);return(0,x.jsx)(x.Fragment,{children:m.name&&m.name&&(0,x.jsxs)(z,{children:[(0,x.jsxs)("div",{className:"brand",children:[(0,x.jsx)("img",{src:S,alt:"logo"}),(0,x.jsx)("h3",{children:"butterflix chat"})]}),(0,x.jsx)("div",{className:"contacts",children:e.map((function(n,e){return(0,x.jsxs)("div",{className:"contact ".concat(e===c?"selected":""),onClick:function(){return function(n,e){d(n),r(e)}(e,n)},children:[(0,x.jsx)("div",{className:"avatar",children:(0,x.jsx)(k.qE,{src:n.pic,alt:""})}),(0,x.jsx)("div",{className:"username",children:(0,x.jsx)("h3",{children:n.name})})]},e)}))}),(0,x.jsxs)("div",{className:"current-user",children:[(0,x.jsx)("div",{className:"",children:(0,x.jsx)(k.qE,{src:m.pic,alt:"avatar"})}),(0,x.jsx)("div",{className:"username",children:(0,x.jsx)("h2",{children:m.name})})]})]})})}var C,z=d.ZP.div(Z||(Z=(0,a.Z)(["\n  display: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n  .brand {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    justify-content: center;\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: white;\n      text-transform: uppercase;\n    }\n  }\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gap: 0.8rem;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .contact {\n      background-color: #ffffff34;\n      min-height: 5rem;\n      cursor: pointer;\n      width: 90%;\n      border-radius: 0.2rem;\n      padding: 0.4rem;\n      display: flex;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n    .selected {\n      background-color: #9a86f3;\n    }\n  }\n  .current-user {\n    background-color: #0d0d30;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: white;\n      }\n    }\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),P=r.p+"static/media/robot.0617a41936621e9697cd.gif";function M(){var n=(0,s.useState)({}),e=(0,i.Z)(n,2),r=e[0],t=e[1];return(0,s.useEffect)((function(){o().get("/api/users/me").then((function(n){return t(n.data)}))}),[]),(0,x.jsxs)(I,{children:[(0,x.jsx)("img",{src:P,alt:""}),(0,x.jsxs)("h1",{children:["Welcome,"," ",(0,x.jsxs)("span",{children:[r.name," ",r.lastname,"!"]})]}),(0,x.jsx)("h3",{children:"Please select a chat to Start messaging."})]})}var q,I=d.ZP.div(C||(C=(0,a.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  flex-direction: column;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: #4e0eff;\n  }\n"]))),F=r(9434),R=r(7219),D=r(4142);var L=d.ZP.div(q||(q=(0,a.Z)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n"]))),V=function(){var n=(0,s.useRef)(),e=(0,s.useState)(void 0),r=(0,i.Z)(e,2),t=r[0],a=r[1],c=(0,s.useState)([]),d=(0,i.Z)(c,2),l=d[0],u=d[1],m=(0,F.I0)(),f=(0,F.v9)((function(n){return n.users}));return(0,s.useEffect)((function(){m((0,R.Xx)())}),[]),(0,s.useEffect)((function(){f&&(n.current=(0,D.io)("http://localhost:8080"),n.current.emit("add-user",f.id))}),[f]),(0,s.useEffect)((function(){f&&o().get("/api/users").then((function(n){return u(n.data)}))}),[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(L,{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)(E,{contacts:l,changeChat:function(n){a(n)}}),void 0===t?(0,x.jsx)(M,{}):(0,x.jsx)(y,{currentChat:t,socket:n})]})})})}},8762:function(n,e,r){n.exports=r.p+"static/media/butterLogo3.0b6d5dd8dba78db3ccd9.png"}}]);
//# sourceMappingURL=63.c713ef5d.chunk.js.map